import { Meta } from '@storybook/blocks';

<Meta title="Comment/CommentForm" />

# CommentForm

## Form Data로 사용하기

```tsx
export const CommentForm = (props: CommentFormProps) => {
  const {
    withAnonymousCheck = true,
    defaultValues = { commentText: '', anonymousChecked: true },
    ...restFormProps
  } = props;

  return (
    <form
      onSubmit={async (e) => {
        e.preventDefault();

        console.log(
          Object.fromEntries(new FormData(e.target as HTMLFormElement))

          // do something
        );
      }}
      css={selfCss}
      {...restFormProps}
    >
      <CommentFormTextArea
        name={COMMENT_TEXT_AREA_NAME}
        defaultValue={defaultValues.commentText}
      />
      <div css={wrapperCss}>
        {withAnonymousCheck && (
          <CommentFormCheckBox
            name={COMMENT_CHECKBOX_NAME}
            defaultChecked={defaultValues.anonymousChecked}
          />
        )}
        <CommentFormButton />
      </div>
    </form>
  );
};
```

## React Hook Form과 함께 사용하기

```tsx
export const CommentFormRHF = (props: CommentFormProps) => {
  const {
    withAnonymousCheck = true,
    defaultValues = { commentText: '', anonymousChecked: true },
    ...restFormProps
  } = props;

  const { register, setValue, handleSubmit } = useForm<DefaultValues>({
    defaultValues,
  });

  const onSubmit = (d: DefaultValues) => console.log(d);

  // do somthing
  return (
    <form onSubmit={handleSubmit(onSubmit)} css={selfCss} {...restFormProps}>
      <CommentFormTextArea
        {...register(COMMENT_TEXT_AREA_NAME, {
          setValueAs: (value) => value.trim(),
        })}
      />
      <div css={wrapperCss}>
        {withAnonymousCheck && (
          <CommentFormCheckBox
            defaultChecked={defaultValues.anonymousChecked}
            onCheckedChange={(value) =>
              setValue(COMMENT_CHECKBOX_NAME, value as boolean)
            }
            {...register(COMMENT_CHECKBOX_NAME)}
          />
        )}
        <CommentFormButton />
      </div>
    </form>
  );
};
```
